(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["loginPage"],{"159b":function(t,e,i){var o=i("da84"),r=i("fdbc"),s=i("17c2"),n=i("9112");for(var a in r){var h=o[a],l=h&&h.prototype;if(l&&l.forEach!==s)try{n(l,"forEach",s)}catch(c){l.forEach=s}}},"17c2":function(t,e,i){"use strict";var o=i("b727").forEach,r=i("a640"),s=i("ae40"),n=r("forEach"),a=s("forEach");t.exports=n&&a?[].forEach:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,i){"use strict";var o=i("23e7"),r=i("17c2");o({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},"48ca":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"background"},[i("div",{staticClass:"login-box"},[i("Login")],1)])},r=[],s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login-comp-box"},[i("div",{staticClass:"title"},[t._v(" 安软标记平台 ")]),i("form",{attrs:{model:t.loginForm}},[i("input",{directives:[{name:"show",rawName:"v-show",value:"login"===t.whichmode||"register"===t.whichmode,expression:" whichmode === 'login' || whichmode === 'register' "},{name:"model",rawName:"v-model",value:t.loginForm.username,expression:"loginForm.username"}],attrs:{id:"uname",type:"text",placeholder:"账户名"},domProps:{value:t.loginForm.username},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.whichMod(e)},input:function(e){e.target.composing||t.$set(t.loginForm,"username",e.target.value)}}}),i("input",{directives:[{name:"show",rawName:"v-show",value:"register"===t.whichmode||"forget"===t.whichmode,expression:"whichmode === 'register' || whichmode === 'forget'"},{name:"model",rawName:"v-model",value:t.loginForm.email,expression:"loginForm.email"}],ref:"email",attrs:{id:"email",type:"email",placeholder:"邮箱"},domProps:{value:t.loginForm.email},on:{keyup:t.correctEmail,input:function(e){e.target.composing||t.$set(t.loginForm,"email",e.target.value)}}}),i("input",{directives:[{name:"show",rawName:"v-show",value:"login"===t.whichmode,expression:"whichmode === 'login'"},{name:"model",rawName:"v-model",value:t.loginForm.password,expression:"loginForm.password"}],attrs:{id:"passwd",type:"password",placeholder:"账户密码"},domProps:{value:t.loginForm.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.whichMod(e)},input:function(e){e.target.composing||t.$set(t.loginForm,"password",e.target.value)}}}),i("input",{directives:[{name:"show",rawName:"v-show",value:"register"===t.whichmode,expression:"whichmode === 'register'"},{name:"model",rawName:"v-model",value:t.loginForm.password1,expression:"loginForm.password1"}],ref:"passwd1",attrs:{id:"passwd1",type:"password",placeholder:"设置密码"},domProps:{value:t.loginForm.password1},on:{keyup:function(e){return t.correctpasswd()},input:function(e){e.target.composing||t.$set(t.loginForm,"password1",e.target.value)}}}),i("input",{directives:[{name:"show",rawName:"v-show",value:"register"===t.whichmode,expression:"whichmode === 'register'"},{name:"model",rawName:"v-model",value:t.loginForm.password2,expression:"loginForm.password2"}],ref:"passwd2",attrs:{id:"passwd2",type:"password",placeholder:"重复密码"},domProps:{value:t.loginForm.password2},on:{keyup:function(e){return t.isSame()},input:function(e){e.target.composing||t.$set(t.loginForm,"password2",e.target.value)}}}),i("div",{staticClass:"err-box"},[i("div",{staticClass:"err-info"},[t._v(" "+t._s(t.err1)+" ")]),i("div",{staticClass:"err-info"},[t._v(" "+t._s(t.err2)+" ")]),i("div",{staticClass:"err-info"},[t._v(" "+t._s(t.err3)+" ")]),i("div",{staticClass:"err-info"},[t._v(" "+t._s(t.err4)+" ")])])]),i("div",{staticClass:"login-btn-box"},[i("input",{staticClass:"login-btn",attrs:{type:"button",value:t.text1},on:{click:t.whichMod}}),i("div",{ref:"errbtn",staticClass:"login-status"},[t._v(" error ")])]),i("div",{staticClass:"btnbox"},[i("input",{staticClass:"regis-btn",attrs:{type:"button",value:t.text2},on:{click:function(e){return t.changeMod(1)}}}),i("input",{staticClass:"forget-btn",attrs:{type:"button",value:t.text3},on:{click:function(e){return t.changeMod(2)}}})])])},n=[],a=(i("4160"),i("159b"),{data:function(){return{loginForm:{username:"",email:"",password:"",password1:"",password2:""},text1:"登录",text2:"注册",text3:"忘记密码",flag:1,whichmode:"login",rightEmail:0,rightPassword:0,isReady:0,err1:"",err2:"",err3:"",err4:""}},methods:{whichMod:function(){"login"===this.whichmode?this.login():"register"===this.whichmode?this.register():"forget"===this.whichmode&&this.forget()},login:function(){var t=this;if(this.flag){this.text1="登录中...",this.flag=0;var e=this;setTimeout((function(){e.flag=1}),2e3),this.$http.post("v1/auth/login",this.loginForm).then((function(e){if(e.data.key){window.sessionStorage.setItem("token",e.data.key),t.showSucLoginBtn("登录成功");var i=t;setTimeout((function(){i.$router.push("/home")}),800)}else{var o;o=t.loginForm.username&&t.loginForm.password?"用户名或密码错误":"请填写用户名或密码",t.showErrLoginBtn(o),t.text1="登录"}})).catch((function(e){t.text1="登录",t.$message({message:e,type:"error"})}))}},register:function(){var t=this;if(this.rightEmail&&this.rightPassword&&this.flag){this.flag=0;var e=this;setTimeout((function(){e.flag=1}),2e3),this.$http.post("v1/auth/register",this.loginForm).then((function(e){if(e.data.key)t.showSucLoginBtn("注册成功"),setTimeout((function(){t.changeMod(1)}),1e3);else for(var i in e.data)e.data[i].forEach((function(e){t.showErrLoginBtn(e)}))})).catch((function(e){t.$message({message:e,type:"error"})}))}},forget:function(){},showSucLoginBtn:function(t){var e=this.$refs.errbtn.style;e.top="0px",e.backgroundColor="#75ff88",this.$refs.errbtn.innerText=t,setTimeout((function(){e.top="30px"}),1500)},showErrLoginBtn:function(t){var e=this.$refs.errbtn.style;e.top="0px",e.backgroundColor="#ff5f5f",this.$refs.errbtn.innerText=t,setTimeout((function(){e.top="30px"}),1500)},changeMod:function(t){1===t?"login"===this.whichmode||"forget"===this.whichmode?(this.whichmode="register",this.text1="注册",this.text2="登录",this.text3="忘记密码"):"register"===this.whichmode&&(this.whichmode="login",this.text1="登录",this.text2="注册",this.text3="忘记密码"):2===t&&("login"===this.whichmode||"register"===this.whichmode?(this.whichmode="forget",this.text1="发送邮件",this.text2="注册",this.text3="登录"):"forget"===this.whichmode&&(this.whichmode="login",this.text1="登录",this.text2="注册",this.text3="忘记密码")),this.clearErr()},correctpasswd:function(){var t=/^(?=.*[0-9])(?=.*[a-zA-Z])(.{8,20})$/;t.test(this.loginForm.password1)?(this.$refs.passwd1.style.border="2px solid #75ff88",this.err3=""):(this.$refs.passwd1.style.border="2px solid #ff5f5f",this.err3="必须是8位数字与字母组合")},isSame:function(){this.loginForm.password1!==this.loginForm.password2?(this.$refs.passwd2.style.border="2px solid #ff5f5f",this.err4="两次密码不相同",this.rightPassword=0):(this.$refs.passwd2.style.border="2px solid #75ff88",this.err4="",this.rightPassword=1)},correctEmail:function(){var t=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;t.test(this.loginForm.email)?(this.$refs.email.style.border="2px solid #75ff88",this.err2="",this.rightEmail=1):(this.$refs.email.style.border="2px solid #ff5f5f",this.err2="邮箱格式错误",this.rightEmail=0)},clearErr:function(){this.err1="",this.err2="",this.err3="",this.err4=""}}}),h=a,l=(i("7671"),i("2877")),c=Object(l["a"])(h,s,n,!1,null,"48f6941b",null),d=c.exports,m={components:{Login:d}},u=m,f=(i("51da"),Object(l["a"])(u,o,r,!1,null,"785d2a78",null));e["default"]=f.exports},"51da":function(t,e,i){"use strict";var o=i("5236"),r=i.n(o);r.a},5236:function(t,e,i){},"5b22":function(t,e,i){},7671:function(t,e,i){"use strict";var o=i("5b22"),r=i.n(o);r.a}}]);
//# sourceMappingURL=loginPage.6150eed4.js.map